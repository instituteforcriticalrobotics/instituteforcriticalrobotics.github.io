# How To Use KiCad

## [1] Introduction
- Make a directory or use Github repository by selecting the notebook icon in the righthand column
  2 options come up: Schematic (EESchema) and Layout
  <img width="947" alt="Screen Shot 2022-11-07 at 12 03 19 PM" src="https://user-images.githubusercontent.com/54836827/200257314-b6120a37-7c99-4794-8681-0e2ee76f9eb6.png">
  
  - EESchema is teh schematic design, wherein the theoretical PCB design is conducted. This is the placing of components and additions of values and connections
  - Layout address the footprints of each component and the tangible, physical layout of the PCB, such as component placement, and wiring ont he top and bottom of the PCB


## [2] Schematic Symbol
- Either access the symbol editor and find the specific component or create a non-existing component
  - Most times, the components will already exist and can immediately be placed into the schematic. The following step are for components that are not found in any KiCad library

## [3] Making A Schematic
- (A) Opens up the symbol library to choose, select and place components into the schematic
  - (C) Duplicates a component
  - (R) Rotates a component
<img width="395" alt="Screen Shot 2022-11-07 at 12 26 47 PM" src="https://user-images.githubusercontent.com/54836827/200261723-95025c7d-2ac9-4c71-8644-9657216a4a99.png">

- Assign specific values to each component on the schematic by right-clicking the component, opening th properties menu and selecting the value feature to input value (Or by using V as a shortcut)
- (W) runs wires/ connectoin between components
- Use the symbol library to select the power flag and the ground symbols (Down arrow). This is a common feature missed out in most circuits and is picked up as an error. Each component that needs to be grounded should go to a ground (multiple ground symbols still connect to one ground) and all the power sources are specified using a powerflag. Connections that do not go anywhere should have a no connectionsymbol (an X)
<img width="784" alt="Screen Shot 2022-11-09 at 11 58 15 AM" src="https://user-images.githubusercontent.com/54836827/200771699-0e0f9242-8469-4486-b270-da9706e0ec1c.png">


- Once all the components are placed and connected correctly, Annotate the components in the annotation menu. This is done to differentiate each component in the schematic and to fully define it
  - The Annotation feature is located directly on the right of the ERC
- Use the Electrical Rules Calculator to double-check the connections
  - The ERC feature is located in the top toolbar on the right
 <img width="385" alt="Screen Shot 2022-11-09 at 12 08 12 PM" src="https://user-images.githubusercontent.com/54836827/200775150-0b4aeb8b-d333-4c12-994f-bf8064e686f1.png">

## [4] Associating Symbols
- Once the schematic has been constructed and validated by the ERC, a footprint needs to be designed
 - A footprint is the real-world size of each component that can be used to model the PCB design more accurately than a schematic
- Open the CvPCB function (top toolbar) to assign a footprint to each respective component
- Once CvPCB is selected and run, KiCad will automatically assign the footprint to each component. In the case that is does not or 
  if a new symbol was created, the footprint will need to manually be assigned. The middle column contains each component within the schematic.
  Once selected, a component library tha tcan be selected from the left column will need to be selected. From here, the component footprint can 
  be found and selected, then appearing in the righthand column
  <img width="1440" alt="Screen Shot 2022-11-09 at 12 14 57 PM" src="https://user-images.githubusercontent.com/54836827/200775372-04b3ce04-d036-4e00-bae1-c47cc82f0102.png">

  
- Once the footprints are assigned, a netlist needs to be generated by clicking export in the files menu. This netlist tells the PCB Layout program which footprints to use, as well as what connections have been assigned to the design in EESchema

## [5] PCB Layout
- Now that a netlist of the PCB has been generated, KiCad can generate a basic PCB layout. Press the green PCB like button on the top right to open up and create a PCB layout file. The file should open as a blank space with a purple border.
- In the File menu, import the netlist file that was generated from the schematic in order to retreive the footprints that were previously assigned. By using this, each component is imported with lines showing the connections that were made in the schematic, showing how each part needs to be connected in reference to the real footprint of each component.

<img width="689" alt="Screen Shot 2022-11-17 at 6 26 20 PM" src="https://user-images.githubusercontent.com/54836827/202474817-accae9d1-0163-43ec-b093-f748645571c3.png">

- Once the components are imported the screen should look something like this. The screenshot above highlights some of the fundamental features of designing the PCB layout
- The first thing that needs to be done is the PCB shape that will contain all the components should be established. This can be done by using the draw line (or any other form of shape) feature on the righthand side of the the workspace.
- The route tracks features (X) allows the user to connect the necessary pins by dragging a route and clicking at turning/ bending points to establish the desired route. The yellow line coming out of the trace towards a specific pin shows where that specific route needs to go, as per the specification of the schematic created earlier. The minimum trace size for the Othermill Pro is 10 mils or 0.254mm, however, this thin trace size makes it hard to solder. It is more advisable to allow the trace sizes to be the same as the with of the PCB pads (usually 1.6mm), while also increasing either the length or the width of the soldering pad of each pad/pin in order to better facilitate soldering
- If the traces overlap, the front of the board can be used as well. At the moment, NYUAD does not have double sided PCB material, so instead, via holes can be selected (V) and be used to connect two seperate traces. Instead of having a route on the front side, a wire can be soldered on after milling is completed.
- If the PCB has components on either side of it and is used as a shield of some sort, the components can be flipped to either side of the PCB by pressing (F). This can then be rotated (R) or moved (M)

<img width="589" alt="Screen Shot 2022-11-17 at 6 34 06 PM" src="https://user-images.githubusercontent.com/54836827/202474837-bd9940e3-fd72-4ce8-8de7-e2a5a8243044.png">

- Once all the components are placed and routed appropriately, it is then important to fill the board with a ground plate. This can be done by using the fill feature listed in hte image above, and selecting a GND layer on the back copper. This allows for the board to have a common GND and would therefore not need any traces between the grounds on the board.
- The components are labeled and these labels appear on the silklayer of the board, which may cause issues. These labels should either be moved to an apporpriate area of the board where the is space, or hidden. To hide these labels, double click on the label and deselect the "visible" option
- After that, the board is ready to be checked using the ECR like in the schematic. The procedure for this is the same as in EESchema.
  - Any Couryard or silk layer overlaps can be ignored as the Othermill is only able to mill out the back cooper and edge cut layers. As long as there are no significant errors, the warnings are okay to ignore.

## [6] Generate Gerber File 

- After finilizing the PCB design using the ECR, the PCB must be converted into a gerber (.gbr) file to be read by the Othermill Pro. To do this, open the file menu inthe top right menu and select the plot funciton.
- Fill in the window with the settings shown in the image above. Make sure to only select Edge Cut layer and the Back Cu. Layer as these are the only two layers that the Othermill Pro are able to manufacture. Before generating the Gerber files, select the Generate Drill Files option
- Fill in the Generate Drill File window with the appropriate settings shown in the image above. Ensure the combining the PTH and NTP files in selected, otherwise the Othermill will not be able to read the files and drill the appropriate holes and vias.
- Once done, select the plot option and go back tot he gerber file generation window and plot the files in the apporpriate folder. Once done, there should be three .gbr files generated: Drill, Back Cu. and Edge Cuts. This is now ready to be uploaded to the Othermill Pro for manufacturing

## [7] Othermill Pro
- Open the Bantam Tools software in order to operate the Othermill Pro. Ensure to use the legacy software rather than the most up-to-date software as the Othermill Pro is an outdated machine and does not funciton well with the new software.
- Home the machine by selecting the homing option. Ensure the graphic on the screen takes into account the L-Bracket if the machine has one. If it doesn not, set the L-Bracket in the homing menu and follow the instruction on the machine.
- Set the size of the copper sheet by assigning the dimension in the top right menu.
- Once the machine is homed, select the Back Cu. layer. This should then prompt you to a new menu wherein 4 layers are to be selected. Back Copper, Edge Cuts and the Drill files should be selected respectively. The top layer option can be left unselected.
- Once selected, unsure everything is being milled properly according to your PCB design by looking at the projected graphic. Each layer can be viewed individually by deselecting the other two. The project can be shifted across the copper plate accroding to your specification by manipulating the x and y coordinates.
  - Any red traces means that the Othermill Pro cannot mill this trace with the current size bit that is attached. This bit can either be replaced by a smaller width, or used accordingly. If it is used with the red traces still existent, the trace will have to be cut by hand using a box cutter after milling.
- Place the Copper plate in the bottom left corner of the Othermill Platform with double sided tape attached to the back end (The non-copper side). Once this is done, you can then begin to mill out the project
- Use the bench scraper to remove the file after milling is complete. Brush off any excess filings and the board is now complete. When soldering components onto the board, be sure to have the PCB diagram handy in order to compare positions and trace connections.
